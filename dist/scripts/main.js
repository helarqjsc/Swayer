"use strict";var Hold={refresh:function(){$(".js-hold").on("mousedown",function(){$(event.target).addClass("hold")}).on("mouseup",function(){$(event.target).removeClass("hold")})},init:function(){var n=this;$(window).load(function(){n.refresh()})}};Hold.init();var ApplicationMenu={render:{devices:["skills","swayer"],DevicesList:function(){var n,e;for(var i in this.devices)e=this.devices[i],n='\n          <div class="col-4">\n            <div class="device-icon '+e+'" \n              add-device="'+e+'"></div>\n            <p>\n              '+e+"\n            </p>\n          </div>",$(".js-insert-devices").append(n)}},toggle:function(){$("body").toggleClass("show-application-menu")},bind:function(){var n=this;$(".js-toggle-menu").on("click",function(){n.toggle()})},init:function(){var n=this;$(window).load(function(){n.render.DevicesList(),n.bind()})}};ApplicationMenu.init();var Dock={lock:!1,icon:{append:function(n){var e='\n      <div class="dock-icon dock-device dock-device-'+n+' active col-2">\n        <div class="dock-icon-active-dot"></div>\n      </div>';$(".js-device-carousel").append(e)}},bind:function(){var n=this;$(".dock-lock").on("click",function(){n.lock=n.lock?!1:!0})},init:function(){var n=this;$(window).load(function(){n.bind()})}};Dock.init();var Audio={sources:[],contexts:[],buffers:{},createContext:function(n){this.contexts.push(new webkitAudioContext)},setFile:function(n,e){var i=[];i[n]=new XMLHttpRequest,i[n].soundName=n,i[n].open("GET","samples/"+e,!0),i[n].responseType="arraybuffer",i[n].addEventListener("load",function(e){Audio.setBuffer(e,n)},!1),i[n].send()},setBuffer:function(n,e){var i=n.target;this.buffers[i.soundName]=this.contexts[e].createBuffer(i.response,!1)},setOptions:function(n){var e=this.contexts[n].createGainNode();this.sources[n]=this.contexts[n].createBufferSource(),this.sources[n].buffer=this.buffers[n],this.sources[n].connect(e),e.connect(this.contexts[n].destination)},play:function(n,e){this.setOptions(n),this.sources[n].loop=e,this.sources[n].noteOn(0)},stop:function(n){this.sources[n].noteOff(0)},refresh:function(){Audio.contexts.length=0,$(".audio").each(function(n){var e=$(this).attr("audio-file");Audio.createContext(n),Audio.setFile(n,e)}),Audio.bind()},bind:function(){var n,e,i;$(".js-pad").on("mousedown",function(){e=$(".js-pad").index($(event.target)),n="loop"===$(event.target).attr("audio-continue")?!0:!1,Audio.play(e,n)}).on("mouseup",function(){i=$(event.target).attr("audio-duration"),e=$(".js-pad").index($(event.target)),"short"===i&&Audio.stop(e)})},init:function(){var n=this;$(window).load(function(){n.refresh()})}};Audio.init();var Device={menu:{toggle:function(n){n.toggleClass("show")}},append:function(n){var e=n.attr("add-device"),i=$(".workspace .wrap");i.append('\n      <div class="device device-'+e+'">\n        '+e+"\n      </div>"),Dock.icon.append(e),Carousel.bind()},del:function(n){var e=n.closest(".device"),i=e.index(),t=$(".dock .dock-device").eq(i);e.remove(),t.remove()},bind:function(){var n=this;$("*[show-device-menu]").on("click",function(){var e=$("."+$(event.target).attr("show-device-menu"));n.menu.toggle(e)}),$("*[add-device]").on("click",function(){n.append($(event.target))}),$(".js-delete-device").on("click",function(){n.del($(event.target))})},init:function(){var n=this;$(window).load(function(){n.bind()})}};Device.init();var Carousel={speed:333,deviceIndex:0,animate:function(n){var e=$(".workspace .wrap"),i=$(window).width();e.animate({left:-1*i*n},Carousel.speed),this.showIconIndicator(n)},showIconIndicator:function(n){$(".js-device-carousel .dock-device").removeClass("show-device-indicator").eq(n).addClass("show-device-indicator")},bind:function(){var n=this;$(".js-device-carousel .dock-device").on("click",function(){Dock.lock||n.animate($(event.target).index())})},init:function(){var n=this;$(window).load(function(){n.bind(),n.showIconIndicator(n.deviceIndex)})}};Carousel.init();var padPatterns={cols2rows2:{pattern:["all","all","kick","snare"]},cols3rows2:{pattern:["all","all","all","kick","hat","snare"]},cols4rows2:{pattern:["all","all","all","all","kick","hat","snare","all"]},cols2rows3:{pattern:["all","all","kick","snare","hat","all"]},cols2rows4:{pattern:["all","all","all","all","kick","snare","hat","all"]},cols3rows3:{pattern:["all","all","all","kick","snare","hat","all","all","all"]},cols3rows4:{pattern:["all","all","all","all","all","all","kick","snare","hat","all","all","all"]},cols4rows3:{pattern:["all","all","all","all","kick","snare","hat","all","all","all","all","all"]},cols4rows4:{pattern:["all","all","all","all","all","all","all","all","kick","snare","hat","all","all","all","all","all"]}},skillsSamples={all:470,kick:778,hat:331,snare:468},Skills={sample:{getRndFile:function(n){var e=skillsSamples[n];return Math.floor(Math.random()*(e-1))+1},getKind:function(n,e,i){return padPatterns["cols"+n+"rows"+e].pattern[i]},getFile:function(n,e,i){var t=this.getKind(n,e,i),o=this.getRndFile(t);return"Skills/"+t+"/"+o+".mp3"}},render:{cols:4,rows:4,pads:function(n){var e,i;void 0!==n?(e=n.closest(".device-skills"),i=e.find(".skills-pads")):void 0===n&&(e=$(".device-skills"),i=$(".skills-pads")),this.appendPads(i),e.css("background",this.getRandomRGBA()),Audio.refresh(),Hold.refresh()},appendPads:function(n){var e=12/this.cols,i="",t="",o="show";n.html("");for(var a=0;a<this.rows*this.cols;a++)i=Skills.sample.getFile(this.cols,this.rows,a),t=Skills.sample.getKind(this.cols,this.rows,a),o="kick"===t||"hat"===t||"snare"===t?"show":"hide",n.append('\n          <div class="pad js-pad js-hold audio col-'+e+" pad-row-"+this.rows+'"\n            audio-file="'+i+'"\n            audio-duration="long"\n            audio-continue="oneshot">\n            <p class="'+o+'">\n              '+t+"\n            </p>\n          </div>")},getRandomColor:function(){return(122*Math.random()+1).toFixed(0)},getRandomRGBA:function(){var n,e,i=0,t="";return n=this.getRandomColor(),e=this.getRandomColor(),i=this.getRandomColor(),t="rgba("+n+", "+e+", "+i+", 1)"}},bind:function(){$(".class").on("click",function(){})},init:function(){var n=this;$(window).load(function(){n.render.pads(),n.bind()})}};Skills.init();var SkillsMenu={bind:function(){$(".js-skills-random-all").on("click",function(n){Skills.render.pads($(event.target))}),$(".js-customize-pads-grid").on("mousedown",function(n){}).on("mousemove",function(n){}).on("mouseup",function(n){})},init:function(){var n=this;$(window).load(function(){n.bind()})}};SkillsMenu.init();